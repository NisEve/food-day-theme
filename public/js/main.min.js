(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  ));

  // assets/js/icsKalenderAll.js
  var require_icsKalenderAll = __commonJS({
    "assets/js/icsKalenderAll.js"() {
      document.addEventListener("DOMContentLoaded", () => {
        const DATA_URL = "/shared/dates.json";
        const NL = "\r\n";
        const escapeICS = (value = "") => value.replace(/\\/g, "\\\\").replace(/;/g, "\\;").replace(/,/g, "\\,").replace(/\n/g, "\\n");
        const toLocalICS = (date, time) => {
          const [y, m, d] = date.split("-");
          const [h, min] = time.split(":");
          return `${y}${m}${d}T${h}${min}00`;
        };
        const nowStampUTC = () => (/* @__PURE__ */ new Date()).toISOString().replace(/[-:]/g, "").split(".")[0] + "Z";
        fetch(DATA_URL).then((res) => {
          if (!res.ok) throw new Error("dates.json nicht erreichbar");
          return res.json();
        }).then((data) => initCalendarButtons(data)).catch((err) => {
          console.warn("Kalender-Abo Fehler:", err);
        });
        function initCalendarButtons(data) {
          document.querySelectorAll(".subscribeCalendar").forEach((button) => {
            var _a;
            const type = button.dataset.calendarSource;
            const title = button.dataset.calendarTitle || "Food Day Termine";
            const status = ((_a = button.nextElementSibling) == null ? void 0 : _a.classList.contains("calendarStatus")) ? button.nextElementSibling : null;
            if (!type || !Array.isArray(data[type])) {
              console.warn("Ung\xFCltige Kalenderquelle:", type);
              return;
            }
            button.addEventListener("click", () => {
              const events = data[type];
              if (!events.length) {
                if (status) {
                  status.textContent = "Zurzeit sind keine Termine verf\xFCgbar.";
                }
                return;
              }
              let ics = "";
              const stamp = nowStampUTC();
              ics += "BEGIN:VCALENDAR" + NL;
              ics += "VERSION:2.0" + NL;
              ics += `PRODID:-//Food Day Seevetal//${escapeICS(title)}//DE` + NL;
              ics += "CALSCALE:GREGORIAN" + NL;
              ics += "METHOD:PUBLISH" + NL;
              ics += "BEGIN:VTIMEZONE" + NL;
              ics += "TZID:Europe/Berlin" + NL;
              ics += "X-LIC-LOCATION:Europe/Berlin" + NL;
              ics += "END:VTIMEZONE" + NL;
              ics += NL;
              events.forEach((ev) => {
                if (!ev.date || !ev.start || !ev.end) return;
                ics += "BEGIN:VEVENT" + NL;
                ics += `UID:${type}-${ev.date}@food-day.de` + NL;
                ics += `DTSTAMP:${stamp}` + NL;
                ics += `DTSTART;TZID=Europe/Berlin:${toLocalICS(ev.date, ev.start)}` + NL;
                ics += `DTEND;TZID=Europe/Berlin:${toLocalICS(ev.date, ev.end)}` + NL;
                ics += `SUMMARY:${escapeICS(title)}` + NL;
                ics += `LOCATION:${escapeICS(
                  "Helbach-Haus B\xFCrgermeister-Heitmann-Stra\xDFe 34c 21217 Seevetal"
                )}` + NL;
                ics += "END:VEVENT" + NL;
              });
              ics += "END:VCALENDAR" + NL;
              const blob = new Blob([ics], {
                type: "text/calendar;charset=utf-8"
              });
              const url = URL.createObjectURL(blob);
              const a = document.createElement("a");
              a.href = url;
              a.download = `${type}-termine.ics`;
              document.body.appendChild(a);
              a.click();
              document.body.removeChild(a);
              URL.revokeObjectURL(url);
              button.textContent = "Kalendereintr\xE4ge heruntergeladen";
              button.disabled = true;
              button.setAttribute("aria-disabled", "true");
              if (status) {
                status.textContent = `Kalendereintr\xE4ge \u201E${title}\u201C wurden heruntergeladen.`;
              }
            });
          });
        }
      });
    }
  });

  // assets/js/curretDates.js
  var require_curretDates = __commonJS({
    "assets/js/curretDates.js"() {
      document.addEventListener("DOMContentLoaded", () => {
        fetch("/shared/dates.json").then((res) => res.json()).then((data) => {
          const today = /* @__PURE__ */ new Date();
          today.setHours(0, 0, 0, 0);
          const formatDateHuman = (dateObj) => {
            const check = new Date(dateObj);
            check.setHours(0, 0, 0, 0);
            const diffDays = Math.round(
              (check - today) / (1e3 * 60 * 60 * 24)
            );
            const base = new Intl.DateTimeFormat("de-DE", {
              weekday: "long",
              day: "2-digit",
              month: "2-digit",
              year: "numeric"
            }).format(dateObj);
            if (diffDays === 0) return `Heute \xB7 ${base}`;
            if (diffDays === 1) return `Morgen \xB7 ${base}`;
            return base;
          };
          const formatTimeHuman = (start, end) => `${start.replace(":", ".")}\u2013${end.replace(":", ".")} Uhr`;
          document.querySelectorAll(".infoBox[data-type]").forEach((box) => {
            const type = box.dataset.type;
            const entries = data[type];
            if (!entries) return;
            const next = entries.map((t) => ({ ...t, d: new Date(t.date) })).filter((t) => t.d >= today).sort((a, b) => a.d - b.d)[0];
            const dateTimeEl = box.querySelector(".date time");
            const timeTimeEl = box.querySelector(".time time");
            const timeWrapper = box.querySelector(".time");
            if (!next) {
              dateTimeEl.textContent = "Zurzeit kein Termin geplant";
              dateTimeEl.removeAttribute("datetime");
              timeWrapper.hidden = true;
              return;
            }
            const isoDate = next.d.toISOString().split("T")[0];
            dateTimeEl.setAttribute("datetime", isoDate);
            dateTimeEl.textContent = formatDateHuman(next.d);
            if (next.start && next.end) {
              const startISO = next.start;
              const endISO = next.end;
              timeWrapper.hidden = false;
              timeTimeEl.setAttribute(
                "datetime",
                `${startISO}/${endISO}`
              );
              timeTimeEl.textContent = formatTimeHuman(next.start, next.end);
            } else {
              timeWrapper.hidden = true;
              timeTimeEl.textContent = "";
              timeTimeEl.removeAttribute("datetime");
            }
          });
        }).catch(() => {
          console.warn("Termine konnten nicht geladen werden");
        });
      });
    }
  });

  // assets/js/allDatesList.js
  var require_allDatesList = __commonJS({
    "assets/js/allDatesList.js"() {
      document.addEventListener("DOMContentLoaded", () => {
        fetch("/shared/dates.json").then((res) => res.json()).then((data) => {
          const today = /* @__PURE__ */ new Date();
          today.setHours(0, 0, 0, 0);
          const formatDateHuman = (dateObj) => {
            const today2 = /* @__PURE__ */ new Date();
            today2.setHours(0, 0, 0, 0);
            const check = new Date(dateObj);
            check.setHours(0, 0, 0, 0);
            const diffDays = Math.round(
              (check - today2) / (1e3 * 60 * 60 * 24)
            );
            const base = new Intl.DateTimeFormat("de-DE", {
              weekday: "long",
              day: "2-digit",
              month: "2-digit",
              year: "numeric"
            }).format(dateObj);
            if (diffDays === 0) return `Heute \xB7 ${base}`;
            if (diffDays === 1) return `Morgen \xB7 ${base}`;
            return base;
          };
          const formatTimeDE = (start, end) => `${start.replace(":", ".")}\u2013${end.replace(":", ".")} Uhr`;
          document.querySelectorAll(".dateList[data-type]").forEach((list) => {
            const type = list.dataset.type;
            const entries = data[type];
            if (!entries) return;
            let nextMarked = false;
            entries.map((t) => ({ ...t, d: new Date(t.date) })).filter((t) => t.d >= today).sort((a, b) => a.d - b.d).forEach((t) => {
              const li = document.createElement("li");
              li.className = "dateItem";
              if (!nextMarked) {
                li.classList.add("is-next");
                li.setAttribute("aria-current", "date");
                nextMarked = true;
              }
              li.innerHTML = `
							<h3>${t.d.toLocaleString("de-DE", {
                month: "long",
                year: "numeric"
              })}</h3>

							<p class="date infoIcon">
								<time datetime="${t.date}">
								${formatDateHuman(t.d)}
								</time>
							</p>

							<p class="time infoIcon">
								<span class="visually-hidden">Uhrzeit:</span>
								${formatTimeDE(t.start, t.end)}
							</p>
						`;
              list.appendChild(li);
            });
          });
        }).catch(() => {
          console.warn("Terminliste konnte nicht geladen werden");
        });
      });
    }
  });

  // assets/js/naviMobile.js
  var require_naviMobile = __commonJS({
    "assets/js/naviMobile.js"() {
      document.addEventListener("DOMContentLoaded", () => {
        const burger = document.getElementById("burgerNavi");
        const navi = document.getElementById("mainNavi");
        const closeNavi = document.getElementById("closeNavi");
        const body = document.body;
        let overlay = null;
        function openNavi() {
          navi.classList.add("open");
          closeNavi.classList.add("open");
          burger.setAttribute("aria-expanded", "true");
          body.classList.add("no-scroll");
          overlay = document.createElement("div");
          overlay.id = "overlay";
          overlay.className = "overlay";
          overlay.addEventListener("click", closeNaviFn);
          document.body.appendChild(overlay);
        }
        function closeNaviFn() {
          navi.classList.remove("open");
          closeNavi.classList.remove("open");
          burger.setAttribute("aria-expanded", "false");
          body.classList.remove("no-scroll");
          if (overlay) {
            overlay.remove();
            overlay = null;
          }
        }
        if (burger && navi && closeNavi) {
          burger.addEventListener("click", () => {
            const isOpen = navi.classList.contains("open");
            isOpen ? closeNaviFn() : openNavi();
          });
          closeNavi.addEventListener("click", closeNaviFn);
        }
      });
    }
  });

  // assets/js/naviDesktop.js
  var require_naviDesktop = __commonJS({
    "assets/js/naviDesktop.js"() {
      document.querySelectorAll("#mainNavi li").forEach((li) => {
        const link = li.querySelector(":scope > a");
        if (!link) return;
        const submenu = li.querySelector(":scope > ul");
        const wrapper = document.createElement("div");
        wrapper.className = "menu-item";
        link.before(wrapper);
        wrapper.appendChild(link);
        if (!submenu) return;
        li.classList.add("has-submenu");
        submenu.hidden = true;
        const button = document.createElement("button");
        button.type = "button";
        button.className = "submenu-toggle";
        button.innerHTML = `<span aria-hidden="true">\u25BE</span>`;
        button.setAttribute("aria-haspopup", "true");
        button.setAttribute("aria-expanded", "false");
        button.setAttribute(
          "aria-label",
          `Untermen\xFC ${link.textContent.trim()} \xF6ffnen`
        );
        wrapper.appendChild(button);
        button.addEventListener("click", () => {
          const open = button.getAttribute("aria-expanded") === "true";
          button.setAttribute("aria-expanded", String(!open));
          submenu.hidden = open;
          li.classList.toggle("is-open", !open);
        });
        button.addEventListener("keydown", (e) => {
          var _a;
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            button.click();
            (_a = submenu.querySelector("a")) == null ? void 0 : _a.focus();
          }
        });
        li.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && !submenu.hidden) {
            button.setAttribute("aria-expanded", "false");
            submenu.hidden = true;
            li.classList.remove("is-open");
            button.focus();
          }
        });
        li.addEventListener("focusout", (e) => {
          const nextFocus = e.relatedTarget;
          if (!li.contains(nextFocus)) {
            button.setAttribute("aria-expanded", "false");
            submenu.hidden = true;
            li.classList.remove("is-open");
          }
        });
      });
    }
  });

  // assets/js/main.js
  var require_main = __commonJS({
    "assets/js/main.js"() {
      var import_icsKalenderAll = __toESM(require_icsKalenderAll());
      var import_curretDates = __toESM(require_curretDates());
      var import_allDatesList = __toESM(require_allDatesList());
      var import_naviMobile = __toESM(require_naviMobile());
      var import_naviDesktop = __toESM(require_naviDesktop());
    }
  });
  require_main();
})();
